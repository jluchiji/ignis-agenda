{"version":3,"sources":["setup.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;sBAOwB,UAAU;;;;;;;;AAK3B,SAAS,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE;;;AAGnC,QAAM,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC;AAC/B,QAAM,CAAC,MAAM,GAAG,oBAAO,IAAI,CAAC,MAAM,CAAC,CAAC;;;AAGpC,QAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAA,GAAG;WAAI,KAAK,CAAC,IAAI,CAAC,aAAa,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC;AACzD,QAAM,CAAC,EAAE,CAAC,OAAO,EAAE,UAAA,GAAG;WAAI,KAAK,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC;AAC3D,QAAM,CAAC,EAAE,CAAC,SAAS,EAAE,UAAA,GAAG;WAAI,KAAK,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC;AAC/D,QAAM,CAAC,EAAE,CAAC,UAAU,EAAE,UAAA,GAAG;WAAI,KAAK,CAAC,IAAI,CAAC,iBAAiB,EAAE,GAAG,CAAC;GAAA,CAAC,CAAC;;;AAGjE,MAAM,IAAI,GAAG,SAAP,IAAI,GAAc;AAAE,UAAM,CAAC,IAAI,CAAC;aAAM,OAAO,CAAC,IAAI,EAAE;KAAA,CAAC,CAAC;GAAE,CAAC;AAC/D,SAAO,CAAC,EAAE,CAAC,SAAS,EAAY,IAAI,CAAC,CAAC;AACtC,SAAO,CAAC,EAAE,CAAC,QAAQ,EAAa,IAAI,CAAC,CAAC;AACtC,SAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;CAEvC","file":"setup.js","sourcesContent":["/**\n * setup.js\n *\n * @author  Denis Luchkin-Zhou <denis@ricepo.com>\n * @license MIT\n */\n\nimport Define      from './define';\n\n/*!\n * Setup agenda to play well with Ignis\n */\nexport function setup(ignis, agenda) {\n\n  /* agenda.define() on steroids */\n  agenda._define = agenda.define;\n  agenda.define = Define.bind(agenda);\n\n  /* Emit agenda events via Ignis dispatcher */\n  agenda.on('fail', job => ignis.emit('agenda.fail', job));\n  agenda.on('start', job => ignis.emit('agenda.start', job));\n  agenda.on('success', job => ignis.emit('agenda.success', job));\n  agenda.on('complete', job => ignis.emit('agenda.complete', job));\n\n  /* Watch for process termination and gracefully shutdown */\n  const stop = function() { agenda.stop(() => process.exit()); };\n  process.on('SIGTERM',           stop);\n  process.on('SIGINT',            stop);\n  process.on('uncaughtException', stop);\n\n}\n"],"sourceRoot":"/source/"}